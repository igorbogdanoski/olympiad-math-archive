{
  "type": "object",
  "properties": {
    "grade": {
      "type": "integer",
      "description": "Target grade level (1-12). Use 1-5 for Pre-Olympiad, 6-12 for Olympiad.",
      "minimum": 1,
      "maximum": 12
    },
    "field": {
      "type": "string",
      "description": "The mathematical branch.",
      "enum": [
        "algebra",
        "geometry",
        "number_theory",
        "combinatorics",
        "arithmetic",
        "logic"
      ]
    },
    "difficulty": {
      "type": "integer",
      "description": "Difficulty level from 1 (School) to 10 (IMO Gold).",
      "minimum": 1,
      "maximum": 10
    },
    "problem_type": {
      "type": "string",
      "description": "The nature of the task.",
      "enum": [
        "calculation",
        "proof",
        "construction",
        "logic_puzzle"
      ]
    },
    "source": {
      "type": "string",
      "description": "Origin of the problem (e.g., 'Numerus 2025', 'JBMO 2020')."
    },
    "problem_id": {
      "type": "string",
      "description": "Unique identifier (e.g., '4424', 'sigma_01'). Keep it short."
    },
    "language_original": {
      "type": "string",
      "description": "Original language code (e.g., 'mk', 'en')."
    },
    "translated": {
      "type": "boolean",
      "description": "True if the problem was translated to Macedonian."
    },
    "is_geometry": {
      "type": "boolean",
      "description": "Set to true if the problem requires a geometric figure."
    },
    "geometry_style": {
      "type": ["string", "null"],
      "description": "Method used for geometry problems. STRICTLY 'synthetic' unless impossible.",
      "enum": [
        "synthetic",
        "analytic",
        "mixed",
        null
      ]
    },
    "visual_prompt": {
      "type": ["string", "null"],
      "description": "REQUIRED FOR GEOMETRY. Step-by-step construction instructions in ENGLISH for an AI visualizer. Example: 'Draw acute triangle ABC. Mark incenter I.' Set to null for non-geometry."
    },
    "manim_code": {
      "type": ["string", "null"],
      "description": "Python code for Manim Community to generate a static image. Use 'self.camera.background_color = WHITE'. Use BLACK for lines/text. Only the body of the construct method. Null for non-geometry."
    },
    "primary_skill": {
      "type": "string",
      "description": "The main cognitive skill/method from the Skill Map (e.g., 'invariants', 'angle_chasing', 'telescoping'). NOT the topic."
    },
    "related_skills": {
      "type": "array",
      "description": "List of secondary skills used.",
      "items": {
        "type": "string"
      }
    },
    "prerequisites": {
      "type": "array",
      "description": "List of specific mathematical concepts/theorems the student must know BEFORE attempting this problem (e.g., 'Pythagorean Theorem', 'Modular Arithmetic', 'Similar Triangles').",
      "items": {
        "type": "string"
      }
    },
    "tags": {
      "type": "array",
      "description": "Mathematical topics/objects (e.g., 'primes', 'circles', 'polynomials').",
      "items": {
        "type": "string"
      }
    },
    "problem_title": {
      "type": "string",
      "description": "A short, descriptive title in Macedonian."
    },
    "problem_text_mk": {
      "type": "string",
      "description": "The full text of the problem in Macedonian. Use LaTeX for math ($...$)."
    },
    "analysis_hint": {
      "type": "string",
      "description": "The 'Aha!' moment. Explain the intuition behind the solution path without doing the calculation. Why did we choose this specific theorem?"
    },
    "solution_strategy": {
      "type": "string",
      "description": "A high-level plan (e.g., '1. Prove cyclic quad. 2. Use Power of a Point. 3. Calculate length.')."
    },
    "solution_content": {
      "type": "string",
      "description": "The rigorous mathematical proof. EXTREMELY DETAILED and accessible to beginners. State every theorem used."
    },
    "pedagogical_notes": {
      "type": "string",
      "description": "Notes including 'Deep Dive', 'Olympian's Advice' (exam strategy), and 'Strategy Review'."
    }
  },
  "required": [
    "grade",
    "field",
    "difficulty",
    "problem_type",
    "source",
    "problem_id",
    "primary_skill",
    "prerequisites",
    "tags",
    "problem_title",
    "problem_text_mk",
    "analysis_hint",
    "solution_content",
    "pedagogical_notes"
  ]
}